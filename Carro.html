<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üèéÔ∏è Corrida Infinita</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    background: linear-gradient(to bottom, #4b0082, #2e0854);
    font-family: 'Poppins', sans-serif;
    overflow: hidden;
  }

  #gameArea {
    position: relative;
    width: 400px;
    height: 600px;
    margin: 30px auto;
    background: #111;
    border: 5px solid #fff;
    border-radius: 20px;
    overflow: hidden;
  }

  .roadLine {
    position: absolute;
    width: 10px;
    height: 80px;
    background: white;
    left: 195px;
    z-index: 0; /* passa por baixo do carro */
  }

  #car {
    position: absolute;
    bottom: 20px;
    left: 180px;
    width: 40px;
    height: 80px;
    border-radius: 5px;
    z-index: 1;
    box-shadow: 0 0 15px #000;
  }

  .obstacle {
    position: absolute;
    width: 40px;
    height: 80px;
    background: purple;
    border-radius: 5px;
    z-index: 1;
  }

  #score {
    color: white;
    text-align: center;
    font-size: 24px;
    margin-top: 10px;
  }

  #startScreen, #colorSelect {
    position: absolute;
    width: 100%;
    height: 100%;
    background: rgba(30, 0, 50, 0.95);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    text-align: center;
    font-size: 22px;
    z-index: 2;
  }

  #colorOptions {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    margin-top: 10px;
  }

  .colorBtn {
    width: 60px;
    height: 120px;
    margin: 10px;
    border-radius: 8px;
    border: 3px solid transparent;
    cursor: pointer;
    transition: transform 0.2s, border-color 0.2s;
  }

  .colorBtn:hover {
    transform: scale(1.1);
    border-color: #fff;
  }

  /* Controles no celular */
  #controls {
    display: flex;
    justify-content: center;
    margin-top: 15px;
  }

  .btn {
    width: 80px;
    height: 80px;
    margin: 10px;
    border: none;
    border-radius: 50%;
    background: #8000ff;
    color: white;
    font-size: 30px;
    box-shadow: 0 0 15px #8000ff;
  }

  .btn:active {
    background: #b84cff;
  }
</style>
</head>
<body>

<h2 id="score">Pontua√ß√£o: 0</h2>
<div id="gameArea">
  <!-- Tela de sele√ß√£o de cor -->
  <div id="colorSelect">
    <h3>Escolha a cor do seu carro üé®</h3>
    <div id="colorOptions">
      <div class="colorBtn" style="background:red;" data-color="red"></div>
      <div class="colorBtn" style="background:blue;" data-color="blue"></div>
      <div class="colorBtn" style="background:green;" data-color="green"></div>
      <div class="colorBtn" style="background:yellow;" data-color="yellow"></div>
      <div class="colorBtn" style="background:orange;" data-color="orange"></div>
      <div class="colorBtn" style="background:#ff00ff;" data-color="#ff00ff"></div>
    </div>
    <p>Toque ou clique em uma cor para come√ßar!</p>
  </div>

  <div id="startScreen" style="display:none;">
    Clique ou toque para come√ßar üöóüí®
  </div>

  <div id="car"></div>
</div>

<div id="controls">
  <button class="btn" id="leftBtn">‚¨ÖÔ∏è</button>
  <button class="btn" id="rightBtn">‚û°Ô∏è</button>
</div>

<script>
const gameArea = document.getElementById('gameArea');
const car = document.getElementById('car');
const scoreElement = document.getElementById('score');
const startScreen = document.getElementById('startScreen');
const colorSelect = document.getElementById('colorSelect');
const leftBtn = document.getElementById('leftBtn');
const rightBtn = document.getElementById('rightBtn');

let player = { speed: 5, score: 0, inPlay: false };
let keys = { ArrowLeft: false, ArrowRight: false };
let roadLines = [];
let obstacles = [];
let carColor = null;

// Escolher cor do carro
document.querySelectorAll('.colorBtn').forEach(btn => {
  btn.addEventListener('click', () => {
    carColor = btn.dataset.color;
    car.style.background = carColor;
    colorSelect.style.display = 'none';
    startScreen.style.display = 'flex';
  });
});

function startGame() {
  startScreen.style.display = 'none';
  player.inPlay = true;
  player.score = 0;
  car.style.left = '180px';
  car.style.bottom = '20px';
  gameArea.innerHTML = '';
  gameArea.appendChild(car);
  gameArea.appendChild(startScreen);

  // Cria faixas da estrada
  roadLines = [];
  for (let i = 0; i < 6; i++) {
    let line = document.createElement('div');
    line.classList.add('roadLine');
    line.y = i * 100;
    line.style.top = line.y + 'px';
    gameArea.appendChild(line);
    roadLines.push(line);
  }

  // Cria obst√°culos
  obstacles = [];
  for (let i = 0; i < 3; i++) {
    let obs = document.createElement('div');
    obs.classList.add('obstacle');
    obs.y = (i + 1) * -300;
    obs.style.top = obs.y + 'px';
    obs.style.left = Math.floor(Math.random() * 360) + 'px';
    gameArea.appendChild(obs);
    obstacles.push(obs);
  }

  window.requestAnimationFrame(playGame);
}

function playGame() {
  if (!player.inPlay) return;

  moveLines();
  moveObstacles();

  let areaRect = gameArea.getBoundingClientRect();
  if (keys.ArrowLeft && parseInt(car.style.left) > 0)
    car.style.left = (parseInt(car.style.left) - player.speed) + 'px';
  if (keys.ArrowRight && parseInt(car.style.left) < (areaRect.width - car.offsetWidth))
    car.style.left = (parseInt(car.style.left) + player.speed) + 'px';

  player.score++;
  scoreElement.innerText = 'Pontua√ß√£o: ' + player.score;
  window.requestAnimationFrame(playGame);
}

function moveLines() {
  roadLines.forEach(line => {
    line.y += player.speed;
    if (line.y > 600) line.y -= 600;
    line.style.top = line.y + 'px';
  });
}

function moveObstacles() {
  obstacles.forEach(obs => {
    obs.y += player.speed;
    if (obs.y > 600) {
      obs.y = -200;
      obs.style.left = Math.floor(Math.random() * 360) + 'px';
    }
    obs.style.top = obs.y + 'px';

    if (isCollide(car, obs)) endGame();
  });
}

function isCollide(a, b) {
  let aRect = a.getBoundingClientRect();
  let bRect = b.getBoundingClientRect();
  return !(
    aRect.bottom < bRect.top ||
    aRect.top > bRect.bottom ||
    aRect.right < bRect.left ||
    aRect.left > bRect.right
  );
}

function endGame() {
  player.inPlay = false;
  startScreen.innerHTML = `üí• Fim de jogo!<br>Pontua√ß√£o final: ${player.score}<br><br>Toque para reiniciar`;
  startScreen.style.display = 'flex';
}

document.addEventListener('keydown', e => { e.preventDefault(); keys[e.key] = true; });
document.addEventListener('keyup', e => { e.preventDefault(); keys[e.key] = false; });

startScreen.addEventListener('click', startGame);
leftBtn.addEventListener('touchstart', () => keys.ArrowLeft = true);
leftBtn.addEventListener('touchend', () => keys.ArrowLeft = false);
rightBtn.addEventListener('touchstart', () => keys.ArrowRight = true);
rightBtn.addEventListener('touchend', () => keys.ArrowRight = false);
</script>
</body>
</html>
